# 鳥栖 需要分析ツール（CLEAN版：フォント未指定・日付抽出バグ修正）

## 特長
- **日付抽出のKeyError対策**：その日 0:00〜24:00 未満の範囲で抽出（`.loc["YYYY-MM-DD"]` 不使用）
- **フォント未指定**：環境フォント任せ（日本語はシステムフォントに依存）。
- 30分正規化（kWh/30分 → kW×2）、任意日表示、最大ピーク日、自動/学習予測（6〜8は解析時に選択）

## デプロイ
1. 本フォルダをGitHubにpush（メインファイルは `app.py`）
2. Streamlit CloudでNew app → リポジトリ/ブランチ/メインファイルを指定
3. 依存は `requirements.txt`（**LightGBMなし**）を推奨  
   - LightGBMが必要なら `requirements_with_lightgbm.txt` を `requirements.txt` として使用

## 使い方
- 左サイドバーで `.xlsx` をアップロード（DBに保存）→ 下のプルダウンから選択
- シート・時刻列・電力列を選択
- 任意日/ピーク日のグラフを確認
- 予測は 6/7/8 をチェックして「予測を実行」

## 既知の注意
- LightGBM のビルドに失敗する環境があります。その場合は同梱の `requirements.txt`（LightGBM無し）を使ってください（アプリはGBDTへ自動フォールバックします）。